{"ast":null,"code":"var _jsxFileName = \"/home/kennedymungai/Documents/FrontEnd/InBrowserMinecraftClone/src/components/Player.js\",\n    _s = $RefreshSig$();\n\nimport { useFrame, useThree } from \"@react-three/fiber\";\nimport { useSphere } from \"@react-three/cannon\";\nimport { useEffect, useRef } from \"react\";\nimport { Vector3 } from \"three\";\nimport { useKeyboard } from \"../hooks/useKeyboard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst JUMP_FORCE = 4;\nconst SPEED = 4;\nexport const Player = () => {\n  _s();\n\n  const {\n    moveBackward,\n    moveForward,\n    moveRight,\n    moveLeft,\n    jump\n  } = useKeyboard();\n  const {\n    camera\n  } = useThree();\n  const [ref, api] = useSphere(() => ({\n    mass: 1,\n    type: 'Dynamic',\n    position: [0, 1, 0]\n  }));\n  const vel = useRef([0, 0, 0]);\n  useEffect(() => {\n    api.velocity.subscribe(v => vel.current = v);\n  }, [api.velocity]);\n  const pos = useRef([0, 0, 0]);\n  useEffect(() => {\n    api.position.subscribe(p => pos.current = p);\n  }, [api.position]);\n  useFrame(() => {\n    camera.position.copy(new Vector3(pos.current[0], pos.current[1], pos.current[2]));\n    const direction = new Vector3();\n    const frontVector = new Vector3(0, 0, (moveBackward ? 1 : 0) - (moveForward ? 1 : 0));\n    const sideVector = new Vector3((moveLeft ? 1 : 0) - (moveRight ? 1 : 0), 0, 0);\n    direction.subVectors(frontVector, sideVector).normalize().multiplyScalar(SPEED).applyEuler(camera.rotation);\n    api.velocity.set(direction.x, vel.current[1], direction.z);\n\n    if (jump && Math.abs(vel.current[1]) < 0.05) {\n      api.velocity.set(vel.current[0], JUMP_FORCE, vel.current[2]);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"mesh\", {\n    ref: ref\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Player, \"/gkwFlzW5hWo2LPaxYg2ycF8khE=\", false, function () {\n  return [useKeyboard, useThree, useSphere, useFrame];\n});\n\n_c = Player;\n\nvar _c;\n\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"names":["useFrame","useThree","useSphere","useEffect","useRef","Vector3","useKeyboard","JUMP_FORCE","SPEED","Player","moveBackward","moveForward","moveRight","moveLeft","jump","camera","ref","api","mass","type","position","vel","velocity","subscribe","v","current","pos","p","copy","direction","frontVector","sideVector","subVectors","normalize","multiplyScalar","applyEuler","rotation","set","x","z","Math","abs"],"sources":["/home/kennedymungai/Documents/FrontEnd/InBrowserMinecraftClone/src/components/Player.js"],"sourcesContent":["import { useFrame, useThree } from \"@react-three/fiber\"\nimport { useSphere } from \"@react-three/cannon\"\nimport { useEffect, useRef } from \"react\"\nimport { Vector3 } from \"three\"\nimport { useKeyboard } from \"../hooks/useKeyboard\"\n\nconst JUMP_FORCE = 4;\nconst SPEED = 4;\n\nexport const Player = () => {\n\tconst { moveBackward, moveForward, moveRight, moveLeft, jump } = useKeyboard()\n\n\tconst { camera } = useThree()\n\tconst [ref, api] = useSphere(() => ({\n\t\tmass: 1,\n\t\ttype: 'Dynamic',\n\t\tposition: [0, 1, 0],\n\t}))\n\n\tconst vel = useRef([0, 0, 0])\n\tuseEffect(() => {\n\t\tapi.velocity.subscribe((v) => vel.current = v)\n\t}, [api.velocity])\n\n\tconst pos = useRef([0, 0, 0])\n\tuseEffect(() => {\n\t\tapi.position.subscribe((p) => pos.current = p)\n\t}, [api.position])\n\n\tuseFrame(() => {\n\t\tcamera.position.copy(new Vector3(pos.current[0], pos.current[1], pos.current[2]))\n\n\t\tconst direction = new Vector3()\n\n\t\tconst frontVector = new Vector3(\n\t\t\t0,\n\t\t\t0,\n\t\t\t(moveBackward ? 1 : 0) - (moveForward ? 1 : 0)\n\t\t)\n\n\t\tconst sideVector = new Vector3(\n\t\t\t(moveLeft ? 1 : 0) - (moveRight ? 1 : 0),\n\t\t\t0,\n\t\t\t0,\n\t\t)\n\n\t\tdirection\n\t\t\t.subVectors(frontVector, sideVector)\n\t\t\t.normalize()\n\t\t\t.multiplyScalar(SPEED)\n\t\t\t.applyEuler(camera.rotation)\n\n\t\tapi.velocity.set(direction.x, vel.current[1], direction.z)\n\n\t\tif (jump && Math.abs(vel.current[1]) < 0.05) {\n\t\t\tapi.velocity.set(vel.current[0], JUMP_FORCE, vel.current[2])\n\t\t}\n\t})\n\n\treturn (\n\t\t<mesh ref={ref}></mesh>\n\t)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}